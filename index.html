<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Check-in Transferencias</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="styles.css" rel="stylesheet">
</head>
<body>
<div class="app">
    <header>
        <h1>Check‑in Transferencias</h1>
        <p>Ingresa tu matrícula para registrar tu llegada.</p>

        <!-- Panel de estadísticas -->
        <div id="panelStats" class="stats">
            <div class="stat-item">
                <span class="stat-label">Check-ins</span>
                <span id="totalCheckins" class="stat-value">--</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Último</span>
                <span id="lastCheckinTime" class="stat-value">--:--</span>
            </div>
            <button id="refreshStatsBtn" class="mini-btn" title="Actualizar" onclick="cargarEstadisticas()">⟳</button>
        </div>
    </header>

    <main>
        <div class="field">
            <label for="matriculaInput">Matrícula</label>
            <input id="matriculaInput" type="text" maxlength="9" placeholder="Ej: A01234567" autocomplete="off" />
            <div id="errorMsg" class="error"></div>
        </div>
        <div class="acciones">
            <button id="buscarBtn" onclick="buscarEstudiante()">Buscar</button>
            <button class="btn-sec" onclick="resetFormulario()" id="resetBtn" disabled>Limpiar</button>
        </div>

        <!-- Tarjeta de estudiante -->
        <div id="tarjetaEstudiante" class="card hidden">
            <h2 id="fullnameEstudiante">Nombre Alumno</h2>
            <div class="badge" id="comunidadBadge"></div>
            <div class="grid">
                <div>
                    <span class="label">Matrícula</span>
                    <span id="matriculaEstudiante">—</span>
                </div>
                <div>
                    <span class="label">Mentor(a)</span>
                    <span id="mentorFullname">—</span>
                </div>
                <div>
                    <span class="label">Campus origen</span>
                    <span id="campusEstudiante">—</span>
                </div>
                <div>
                    <span class="label">Carrera</span>
                    <span id="carreraEstudiante">—</span>
                </div>
            </div>

            <button id="asistenciaBtn" class="primary-btn" style="margin-top:14px;width:100%;" onclick="registrarAsistencia()">¡Ya llegué!</button>

            <div id="mensajeExito" class="hidden success-box">
                <p>
                    ✅ Registro de asistencia realizado.<br>
                    <b>¡Entrega el kit de <span id="kitComunidad"></span>!</b><br>
                    <span class="small-note">Muestra esta pantalla al staff para confirmar.</span>
                </p>
            </div>
        </div>

        <div class="footer-msg">
            Versión check-in • Si tienes dudas, acude al módulo de apoyo.
        </div>
    </main>
</div>

<script src="app.js" defer></script>
</body>
</html>
